<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <title>Jaap Ledger</title>

  <!-- Mobile-friendly -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

  <!-- App styling -->
  <link rel="stylesheet" href="styles.css">

  <!-- PWA manifest -->
  <link rel="manifest" href="manifest.json">
  
  <!-- iOS PWA -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Jaap Ledger">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!-- Disable Safari UI quirks -->
<meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="apple-touch-icon" href="icons/icon-192.png">
<link rel="apple-touch-startup-image" href="hanuman-splash.png"> 
</head>

<body>
<div id="splash-screen">
  <img src="hanuman-splash.png" alt="App Splash Screen">
</div>

  <h1>Jaap Ledger</h1>

  <!-- Today Entry Card -->
  <section id="today-card">
    <!-- Filled by app.js -->
  </section>

  <!-- Reflection Summary -->
  <div id="reflection-summary"></div>
  
<!-- Maintenance Toggle -->
<button id="maintenance-toggle" aria-label="Maintenance">
  ⚙︎
</button>

<!-- Maintenance Drawer -->
<div id="maintenance-drawer">
  <div class="maintenance-panel">
    <h3>Maintenance</h3>

    <button id="export-json-btn" class="maintenance-btn">
		⬇️ Export Ledger (JSON)
	</button>


	<button id="import-json-btn" class="maintenance-btn">
		⬆️ Import Ledger (JSON)
	</button>

	<input
		type="file"
		id="import-json-input"
		accept="application/json"
		style="display:none"
	/>

    <button id="restore-backup-btn" class="maintenance-btn">
      Restore from Backup
    </button>
  </div>
</div>


</div>


  <hr>

  <!-- Ledger List -->
  <section id="ledger-list">
    <!-- Ledger rows rendered here -->
  </section>

  <!-- App logic -->
  <script>
  const toggleBtn = document.getElementById("maintenance-toggle");
  const drawer = document.getElementById("maintenance-drawer");

  toggleBtn.addEventListener("click", () => {
    const isOpen = drawer.classList.toggle("open");
    drawer.setAttribute("aria-hidden", !isOpen);
  });
  document.addEventListener("click", (e) => {
  if (
    drawer.classList.contains("open") &&
    !drawer.contains(e.target) &&
    e.target !== toggleBtn
  ) {
    drawer.classList.remove("open");
    drawer.setAttribute("aria-hidden", "true");
  }
});
</script>
  <script src="app.js"></script>
</body>
</html>

